
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>튜토리얼 &#8212; Alembic 1.0.8 documentation</title>
    <link rel="stylesheet" href="_static/nature_override.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/changelog.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx_paramlinks.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="색인" href="genindex.html" />
    <link rel="search" title="검색" href="search.html" />
    <link rel="next" title="마이그레이션 자동 생성" href="autogenerate.html" />
    <link rel="prev" title="서문" href="front.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>탐색</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="전체 색인"
             accesskey="I">색인</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python 모듈 목록"
             >모듈</a> |</li>
        <li class="right" >
          <a href="autogenerate.html" title="마이그레이션 자동 생성"
             accesskey="N">다음</a> |</li>
        <li class="right" >
          <a href="front.html" title="서문"
             accesskey="P">이전</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Alembic 1.0.8 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tutorial">
<h1>튜토리얼<a class="headerlink" href="#tutorial" title="제목 주소">¶</a></h1>
<p>Alembic은 관계형 데이터베이스의 생성, 관리, 실행의 <em>변경 관리</em>를 위한 스크립트로, SQLAlchemy를 기본 엔진으로 사용한다. 이 튜토리얼은 Alembic 도구의 이론과 사용 방법에 대한 전체적인 소개를 제공할 것이다.</p>
<p>시작을 위해, <a class="reference internal" href="front.html#installation"><span class="std std-ref">설치</span></a>에서 설명된 것과 같이 Alembic이 설치되었는지 확인하라.</p>
<div class="section" id="the-migration-environment">
<h2>마이그레이션 환경<a class="headerlink" href="#the-migration-environment" title="제목 주소">¶</a></h2>
<p>Alembic의 사용은 <em>마이그레이션 환경</em>을 생성하는 것으로 시작한다.  마이그레이션 환경은 특정 어플리케이션을 위한 스크립트의 디렉토리이다.  마이그레이션 환경은 한 번만 생성되며, 그 다음에는 어플리케이션의 소스 코드 자체로 유지 보수된다.  마이그레이션 환경은 Alembic 명령어인 <code class="docutils literal notranslate"><span class="pre">init</span></code>을 사용하여 생성되고, 어플리케이션의 특정 요구사항에 맞도록 변경할 수 있다.</p>
<p>생성된 마이그레이션 스크립트의 일부를 포함한, 마이그레이션 환경의 구조는 다음과 같다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yourproject</span><span class="o">/</span>
    <span class="n">alembic</span><span class="o">/</span>
        <span class="n">env</span><span class="o">.</span><span class="n">py</span>
        <span class="n">README</span>
        <span class="n">script</span><span class="o">.</span><span class="n">py</span><span class="o">.</span><span class="n">mako</span>
        <span class="n">versions</span><span class="o">/</span>
            <span class="mi">3512</span><span class="n">b954651e_add_account</span><span class="o">.</span><span class="n">py</span>
            <span class="mi">2</span><span class="n">b1ae634e5cd_add_order_id</span><span class="o">.</span><span class="n">py</span>
            <span class="mi">3</span><span class="n">adcc9a56557_rename_username_field</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>마이그레이션 환경 디렉토리는 다음의 디렉토리 및 파일들을 포함한다:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">yourproject</span></code> - 이 디렉토리는 어플리케이션 소스 코드의 루트, 또는 루트 내에 있는 어떤 디렉토리이다.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">alembic</span></code> - 이 디렉토리는 어플리케이션의 소스 트리 안에 있으며, 마이그레이션 환경의 홈이다.  어떠한 이름을 붙여도 되고, 여러 개의 데이터베이스를 사용하는 프로젝트인 경우 하나 이상을 가질 수도 있다.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">env.py</span></code> - 이 파이썬 스크립트는 Alembic 마이그레이션 도구를 불러올 때마다 실행된다. 최소한, 이 파일은 SQLAlchemy 엔진을 설정하고 생성하기 위한 명령을 포함하고 있으며, 트랜잭션에 따라 엔진과의 연결을 확보한 다음, 데이터베이스 연결의 소스를 이용하여 마이그레이션 엔진을 실행한다.</p>
<p><code class="docutils literal notranslate"><span class="pre">env.py</span></code> 스크립트는 생성된 환경의 일부분으로 마이그레이션이 동작하는 방법은 완전히 사용자 맞춤화하여 변경 가능하다.  연결하는 방법에 대한 정확한 세부 사항들과 마이그레이션 환경이 어떻게 동작하는지에 대한 세부 내용 또한 여기에 있다.  이 스크립트는 수정 가능하여 여러 엔진들이 작동할 수 있도록 하고, 커스텀 인자들이 마이그레이션 환경에 전달되고, 특정 어플리케이션의 라이브러리와 모델들을 불러와 사용 가능하게 만든다.</p>
<p>Alembic은 각각 다른 유스 케이스를 위한 다양한 종류의``env.py``를 특징으로 하는 초기화 템플릿의 세트를 포함한다.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">README</span></code> - 다양한 환경 템플릿에 포함되어 있고, 정보를 제공하는 내용들을 담고 있다.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">script.py.mako</span></code> - 이것은 <a class="reference external" href="http://www.makotemplates.org">Mako</a> 템플릿 파일로 새로운 마이그레이션 스크립트를 생성하기 위해서 사용된다.  여기에 있는 무엇이든지 <code class="docutils literal notranslate"><span class="pre">versions/</span></code> 안에 새로운 파일을 생성하기 위해 사용된다.  이것은 스크립트로 작성 가능하여 각각의 마이그레이션 파일의 구조를 제어할 수 있도록 하고, 또한 각 파일에 표준 임포트를 포함하여 <code class="docutils literal notranslate"><span class="pre">upgrade()</span></code>와 <code class="docutils literal notranslate"><span class="pre">downgrade()</span></code> 함수의 구조를 변경할 수 있다.  예를 들어, <code class="docutils literal notranslate"><span class="pre">multidb</span></code> 환경은 <code class="docutils literal notranslate"><span class="pre">upgrade_engine1()</span></code>, <code class="docutils literal notranslate"><span class="pre">upgrade_engine2()</span></code>이라는 명명 방식을 사용하여 여러 함수가 생성되는 것을 허용한다.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">versions/</span></code> - 이 디렉토리는 개별적인 버전 스크립트를 가지고 있다.  다른 마이그레이션 도구들을 사용하는 사람들은 아마도 여기 파일들이 정수의 오름차순을 사용하지 않고, 대신 부분적 GUID 접근법을 사용하는 것을 알아차렸을 것이다.  Alembic에서는, 버전 스크립트의 순서가 스크립트 자체 내의 지시문에 상대적이고, 이론적으로는 서로 다른 버전 파일들을 이어 붙이는 것이 가능하며, 비록 조심스럽기는 하나 수동으로 서로 다른 브랜치의 마이그레이션 순서를 합칠 수 있다.</p>
</li>
</ul>
</div>
<div class="section" id="creating-an-environment">
<h2>환경 생성하기<a class="headerlink" href="#creating-an-environment" title="제목 주소">¶</a></h2>
<p>환경이 무엇인지에 대한 기본적 이해와 함께, 우리는 <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">init</span></code>을 이용하여 환경을 생성할 수 있다. 이 명령은 “일반적” 템플릿을 사용하여 환경을 생성할 것이다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd yourproject
$ alembic init alembic
</pre></div>
</div>
<p>위에서 <code class="docutils literal notranslate"><span class="pre">init</span></code> 명령어는 <code class="docutils literal notranslate"><span class="pre">alembic</span></code>이라는 마이그레이션 디렉토리를 생성하기 위해서 호출되었다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Creating</span> <span class="n">directory</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">yourproject</span><span class="o">/</span><span class="n">alembic</span><span class="o">...</span><span class="n">done</span>
<span class="n">Creating</span> <span class="n">directory</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">yourproject</span><span class="o">/</span><span class="n">alembic</span><span class="o">/</span><span class="n">versions</span><span class="o">...</span><span class="n">done</span>
<span class="n">Generating</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">yourproject</span><span class="o">/</span><span class="n">alembic</span><span class="o">.</span><span class="n">ini</span><span class="o">...</span><span class="n">done</span>
<span class="n">Generating</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">yourproject</span><span class="o">/</span><span class="n">alembic</span><span class="o">/</span><span class="n">env</span><span class="o">.</span><span class="n">py</span><span class="o">...</span><span class="n">done</span>
<span class="n">Generating</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">yourproject</span><span class="o">/</span><span class="n">alembic</span><span class="o">/</span><span class="n">README</span><span class="o">...</span><span class="n">done</span>
<span class="n">Generating</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">yourproject</span><span class="o">/</span><span class="n">alembic</span><span class="o">/</span><span class="n">script</span><span class="o">.</span><span class="n">py</span><span class="o">.</span><span class="n">mako</span><span class="o">...</span><span class="n">done</span>
<span class="n">Please</span> <span class="n">edit</span> <span class="n">configuration</span><span class="o">/</span><span class="n">connection</span><span class="o">/</span><span class="n">logging</span> <span class="n">settings</span> <span class="ow">in</span>
<span class="s1">&#39;/path/to/yourproject/alembic.ini&#39;</span> <span class="n">before</span> <span class="n">proceeding</span><span class="o">.</span>
</pre></div>
</div>
<p>또한 Alembic은 다른 환경 템플릿들을 포함한다.  환경 템플릿들은 <code class="docutils literal notranslate"><span class="pre">list_templates</span></code> 명령어를 사용하여 목록으로 볼 수 있다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic list_templates
Available templates:

generic - Generic single-database configuration.
multidb - Rudimentary multi-database configuration.
pylons - Configuration that reads from a Pylons project environment.

Templates are used via the &#39;init&#39; command, e.g.:

  alembic init --template pylons ./scripts
</pre></div>
</div>
</div>
<div class="section" id="editing-the-ini-file">
<h2>.init 파일 편집하기<a class="headerlink" href="#editing-the-ini-file" title="제목 주소">¶</a></h2>
<p>Alembic은 현재 디렉토리 안에 <code class="docutils literal notranslate"><span class="pre">alembic.init</span></code> 파일을 두고 있다.  이것은 <code class="docutils literal notranslate"><span class="pre">alembic</span></code> 스크립트가 실행될 때 찾는 파일이다.  이 파일은 어디에든 위치할 수 있는데, <code class="docutils literal notranslate"><span class="pre">alembic</span></code> 스크립트가 일반적으로 실행되는 디렉토리와 같은 데 있거나, 만약 다른 디렉토리 안에 있으면, <code class="docutils literal notranslate"><span class="pre">—config</span></code> 옵션을 사용해서 <code class="docutils literal notranslate"><span class="pre">alembic</span></code> 러너에 지정할 수 있다.</p>
<p>“일반적” 설정으로 생성된 파일은 다음과 같다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># A generic, single database configuration.

[alembic]
# path to migration scripts
script_location = alembic

# template used to generate migration files
# file_template = %%(rev)s_%%(slug)s

# timezone to use when rendering the date
# within the migration file as well as the filename.
# string value is passed to dateutil.tz.gettz()
# leave blank for localtime
# timezone =

# max length of characters to apply to the
# &quot;slug&quot; field
#truncate_slug_length = 40

# set to &#39;true&#39; to run the environment during
# the &#39;revision&#39; command, regardless of autogenerate
# revision_environment = false

# set to &#39;true&#39; to allow .pyc and .pyo files without
# a source .py file to be detected as revisions in the
# versions/ directory
# sourceless = false

# version location specification; this defaults
# to alembic/versions.  When using multiple version
# directories, initial revisions must be specified with --version-path
# version_locations = %(here)s/bar %(here)s/bat alembic/versions

# the output encoding used when revision files
# are written from script.py.mako
# output_encoding = utf-8

sqlalchemy.url = driver://user:pass@localhost/dbname

# Logging configuration
[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S
</pre></div>
</div>
<p>이 파일은 파이썬의 <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParser.SafeConfigParser</span></code> 객체를 사용하여 읽는다.  <a href="#id1"><span class="problematic" id="id2">``</span></a>%(here)s``변수는 위에서 Alembic script location에 대한 경로로 사용한 것처럼 디렉토리나 파일의 절대 경로를 사용하기 위한 대체 변수로 제공된다.</p>
<p>이 파일은 다음의 특징들을 가지고 있다:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">[alembic]</span></code> - 이것은 Alembic이 설정을 결정하기 위한 부분이다.  Alembic은 파일의 다른 부분들은 직접적으로 읽지 않는다.  “Alembic”의 이름은 <code class="docutils literal notranslate"><span class="pre">—name</span></code> 커맨드라인 플래그를 사용해 변경할 수 있다; 이에 대한 기본적인 예시는 <a class="reference internal" href="cookbook.html#multiple-environments"><span class="std std-ref">Run Multiple Alembic Environments from one .ini file</span></a>를 참고하라.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">script_location</span></code> - 이것은 Alembic 환경의 위치이다.  일반적으로 파일시스템의 위치를 명시하는데, 위치가 절대적이든 상대적이든 상관없다.  만약 상대적 경로인 경우, 현재 디렉토리에 대해 상대적으로 위치가 해석된다.</p>
<p>이것은 모든 케이스에서 Alembic에 의해 요구되는 유일한 키이다.  <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">init</span> <span class="pre">alembic</span></code> 명령어를 가지고 .ini 파일을 생성하는 것은 <code class="docutils literal notranslate"><span class="pre">alembic</span></code>이란 이름의 디렉토리 안에서 자동적으로 이루어지게 된다.  특수한 변수인 <code class="docutils literal notranslate"><span class="pre">%(here)s</span></code>는 <code class="docutils literal notranslate"><span class="pre">(here)s/alembic</span></code>와 같이 사용될 수 있다.</p>
<p>.egg 파일로 패키지되는 어플리케이션의 지원을 위하여, 위치 값은 <a class="reference external" href="https://setuptools.readthedocs/io/en/latest/pkg_resources.html">package resource</a>로도 명시될 수 있으며, 이와 같은 경우에는 <code class="docutils literal notranslate"><span class="pre">resource_filename()</span></code>이 파일을 찾는데 사용될 수 있다(0.2.2의 새로운 기능).  콜론을 포함한 절대 경로가 아닌 어떠한 URI는 실제 파일명 보다 리소스 이름으로 해석된다.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">file_template</span></code> - 이것은 새로운 마이그레이션 파일을 생성할 때 사용되는 명명 방식이다. 현재의 값이 기본값이기 때문에, 주석처리 된다.  사용가능한 토큰은 다음을 포함한다:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">%%(rev)s</span></code> - 리비전 id</li>
<li><code class="docutils literal notranslate"><span class="pre">%%(slug)s</span></code> - 리비전 메세지로부터 나온 짧게 줄인 문자열</li>
<li><code class="docutils literal notranslate"><span class="pre">%%(year)d</span></code>, <code class="docutils literal notranslate"><span class="pre">%%(month).2d</span></code>, <code class="docutils literal notranslate"><span class="pre">%%(day).2d</span></code>, <code class="docutils literal notranslate"><span class="pre">%%(hour).2d</span></code>, <code class="docutils literal notranslate"><span class="pre">%%(minute).2d</span></code>, <code class="docutils literal notranslate"><span class="pre">%%(second).2d</span></code> - 날짜 생성의 요소들로, <code class="docutils literal notranslate"><span class="pre">timezone</span></code> 설정 옵션이 사용되지 않는 경우 기본적으로 <code class="docutils literal notranslate"><span class="pre">datetime.datetime.now()</span></code>를 사용한다.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">timezone</span></code> - 선택적인 타임존 이름(예시, <code class="docutils literal notranslate"><span class="pre">UTC</span></code>, <code class="docutils literal notranslate"><span class="pre">EST5EDT</span></code>, 등)으로 마이그레이션 파일의 코멘트 내부와 파일명에서 만들어지는 타임스탬프에 적용될 것이다.  만약 <code class="docutils literal notranslate"><span class="pre">timezone``이</span> <span class="pre">명시</span> <span class="pre">되었으면,</span> <span class="pre">날짜</span> <span class="pre">객체</span> <span class="pre">생성은</span> <span class="pre">더이상``datetime.datetime.now()</span></code>로 부터 되는 것이 아니고 대신 다음과 같이 생성된다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
      <span class="n">tzinfo</span><span class="o">=</span><span class="n">dateutil</span><span class="o">.</span><span class="n">tz</span><span class="o">.</span><span class="n">tzutc</span><span class="p">()</span>
<span class="p">)</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span>
    <span class="n">dateutil</span><span class="o">.</span><span class="n">tz</span><span class="o">.</span><span class="n">gettz</span><span class="p">(</span><span class="o">&lt;</span><span class="n">timezone</span><span class="o">&gt;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">버전 0.9.2에 추가.</span></p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">truncate_slug_length</span></code> - 기본값은 40이고, “slug” 필드 안에 포함되는 문자의 최대 개수이다.</p>
<div class="versionadded">
<p><span class="versionmodified">버전 0.6.1에 추가: </span>- added <code class="docutils literal notranslate"><span class="pre">truncate_slug_length</span></code> configuration</p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.url</span></code> - SQLAlchemy를 통해 데이터베이스에 연결하기 위한 URL이다.  사실 이 키는 “일반적” 설정으로 명시된 “env.py” 파일 안에서만 참조된다; 해당 파일은 개발자에 의해 변경될 수 있다. 다중 데이터베이스 설정은 여기에 있는 다중 키로 대응할 수 있고, 또는 파일의 다른 부분을 참조할 수 있다.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">revision_environment</span></code> - 값이 ‘true’로 설정됐을 시, 새로운 리비전 파일을 생성할 때와 <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">history</span></code> 명령어를 실행할 때, 마이그레이션 환경 스크립트인 <code class="docutils literal notranslate"><span class="pre">env.py</span></code>가 무조건적으로 실행되는 것을 지시하는 플래그이다.</p>
<div class="versionchanged">
<p><span class="versionmodified">버전 0.9.6으로 변경: </span><code class="docutils literal notranslate"><span class="pre">revision_environment</span></code>가 true로 설정되었을 때 <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">history</span></code> 명령어는 무조건적으로 환경을 사용한다.</p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">sourceless</span></code> - ’true’으로 설정되었을 때, versions 디렉토리 안에 .pyc 또는 .pyo 파일들로만 존재하는 리비전 파일이 버전으로서 사용되어 “sourceless” 버전 관리 폴더를 허용한다. 기본값인 ‘false’로 남겨두는 경우, 오직 .py 파일만 버전 파일로 사용된다.</p>
<div class="versionadded">
<p><span class="versionmodified">버전 0.6.4에 추가.</span></p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">version_locations</span></code> - 리비전 파일 위치의 선택적인 목록으로, 리비전이 동시에 여러 디렉토리 안에 존재하는 것을 허용한다. 예시로 <a class="reference internal" href="branches.html#multiple-bases"><span class="std std-ref">Working with Multiple Bases</span></a>를 보라.</p>
<div class="versionadded">
<p><span class="versionmodified">버전 0.7.0에 추가.</span></p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">output_encoding</span></code> - Alembic이 <code class="docutils literal notranslate"><span class="pre">script.py.mako</span></code>파일을 새로운 마이그레이션 파일로 작성할 때 사용하는 인코딩 방식이다.  기본값은 <code class="docutils literal notranslate"><span class="pre">’utf-8’</span></code>이다.</p>
<div class="versionadded">
<p><span class="versionmodified">버전 0.7.0에 추가.</span></p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">[loggers]</span></code>, <code class="docutils literal notranslate"><span class="pre">[handlers]</span></code>, <code class="docutils literal notranslate"><span class="pre">[formatters]</span></code>, <code class="docutils literal notranslate"><span class="pre">[logger_*]</span></code>, <code class="docutils literal notranslate"><span class="pre">[handler_*]</span></code>, <code class="docutils literal notranslate"><span class="pre">[formatter_*]</span></code> - 이 섹션들은 모두 파이썬 표준 로깅 설정의 일부로, 그 방법들은 <a class="reference external" href="http://docs.python.org/library/logging.comfig.html#configuration-file-format">Configuration File Format</a>에 문서화되어 있다.</p>
</li>
</ul>
<p>하나의 데이터베이스와 일반적 설정으로 시작하기 위해서, SQLAlchemy URL의 설정만이 필요한 것에 전부이다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sqlalchemy</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">postgresql</span><span class="p">:</span><span class="o">//</span><span class="n">scott</span><span class="p">:</span><span class="n">tiger</span><span class="nd">@localhost</span><span class="o">/</span><span class="n">test</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-migration-script">
<span id="create-migration"></span><h2>마이그레이션 스크립트 생성하기<a class="headerlink" href="#create-a-migration-script" title="제목 주소">¶</a></h2>
<p>환경이 준비되었으면 <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">revision</span></code>을 사용하여 새로운 리비전을 생성할 수 있다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic revision -m &quot;create account table&quot;
Generating /path/to/yourproject/alembic/versions/1975ea83b712_create_accoun
t_table.py...done
</pre></div>
</div>
<p>새로운 파일 <code class="docutils literal notranslate"><span class="pre">1975ea83b712_create_account_table.py</span></code>이 생성되었다. 파일의 내부를 살펴보자:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;create account table</span>

<span class="sd">Revision ID: 1975ea83b712</span>
<span class="sd">Revises:</span>
<span class="sd">Create Date: 2011-11-08 11:40:27.089406</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># revision identifiers, used by Alembic.</span>
<span class="n">revision</span> <span class="o">=</span> <span class="s1">&#39;1975ea83b712&#39;</span>
<span class="n">down_revision</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">branch_labels</span> <span class="o">=</span> <span class="kc">None</span>

<span class="kn">from</span> <span class="nn">alembic</span> <span class="k">import</span> <span class="n">op</span>
<span class="kn">import</span> <span class="nn">sqlalchemy</span> <span class="k">as</span> <span class="nn">sa</span>

<span class="k">def</span> <span class="nf">upgrade</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">downgrade</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>파일은 일부 헤더 정보, 현재 리비전과 “downgrade” 리비전의 ID, 기본 Alembic 지시어의 임포트, 그리고 비어있는 <code class="docutils literal notranslate"><span class="pre">upgrade()</span></code>와 <code class="docutils literal notranslate"><span class="pre">downgrade()</span></code> 함수를 포함한다.  여기서 우리의 역할은 <code class="docutils literal notranslate"><span class="pre">upgrade()</span></code>와 <code class="docutils literal notranslate"><span class="pre">downgrade()</span></code> 함수를 데이터베이스의 변경에 대한 설정을 사용할 지시문으로 채우는 것이다.  일반적으로, <code class="docutils literal notranslate"><span class="pre">upgrade()``는</span> <span class="pre">필요한</span> <span class="pre">반면</span> <span class="pre">``downgrade()</span></code>는 오직 다운된 리비전의 성능이 요구될 경우에만 필요하지만, 그럼에도 함수를 작성하는 것은 좋은 생각이다.</p>
<p>또 다른 주의해야 할 것은 <code class="docutils literal notranslate"><span class="pre">down_revision</span></code> 변수이다.  이것은 Alembic이 마이그레이션을 적용하기 위한 정확한 순서를 아는 방법이다.  우리가 다음 리비전을 생성할 때, 새로운 파일의 <code class="docutils literal notranslate"><span class="pre">down_revision</span></code> ID는 이 리비전을 가리킬 것이다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># revision identifiers, used by Alembic.</span>
<span class="n">revision</span> <span class="o">=</span> <span class="s1">&#39;ae1027a6acf&#39;</span>
<span class="n">down_revision</span> <span class="o">=</span> <span class="s1">&#39;1975ea83b712&#39;</span>
</pre></div>
</div>
<p>Alembic이 <code class="docutils literal notranslate"><span class="pre">versions/</span></code> 디렉토리에 대해 작업을 실행할 때 마다, Alembic은 디렉토리 안의 모든 파일을 읽고, <code class="docutils literal notranslate"><span class="pre">down_revision</span></code>이 <code class="docutils literal notranslate"><span class="pre">None</span></code>으로 표시된 첫 번째 파일을 포함하여, <code class="docutils literal notranslate"><span class="pre">down_revision</span></code> ID들이 서로 어떻게 연결되어 있는지에 기반하여 목록을 구성한다.  만약 마이그레이션 환경이 수천 개의 마이그레이션을 가지고 있다면, 이론적으로는 시작 시 약간의 대기 시간이 추가되어 시작할 수 있지만, 실제로는 프로젝트가 아마도 오래된 마이그레이션들을 제거할 것이다(현재의 데이터베이스를 완벽하게 빌드하도록 유지한 상태에서, 이 작업을 어떻게 하는지에 대한 설명은 <a class="reference internal" href="cookbook.html#building-uptodate"><span class="std std-ref">Building an Up to Date Database from Scratch</span></a>부분에서 보라).</p>
<p>그 다음에는 스크립트에 지시문들을 추가하는데, 새로운 테이블 <code class="docutils literal notranslate"><span class="pre">account</span></code>를 추가한다고 가정해보자:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">upgrade</span><span class="p">():</span>
    <span class="n">op</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span>
        <span class="s1">&#39;account&#39;</span><span class="p">,</span>
        <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">200</span><span class="p">)),</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">downgrade</span><span class="p">():</span>
    <span class="n">op</span><span class="o">.</span><span class="n">drop_table</span><span class="p">(</span><span class="s1">&#39;account&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_table" title="alembic.operations.Operations.create_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_table()</span></code></a>과 <a class="reference internal" href="ops.html#alembic.operations.Operations.drop_table" title="alembic.operations.Operations.drop_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">drop_table()</span></code></a>은 Alembic 지시문들이다.  Alembic은 이러한 가능한 간단하고 최소화하여 설계된 지시문들을 통해서 모든 기본적 데이터베이스 마이그레이션 작업을 제공한다; 대부분의 지시문들은 지금 있는 테이블의 메타데이터에 의존하지 않는다.  이 지시문들은 명령을 실행하기 위해 데이터베이스의 연결이 어떻게 되어 있는지를 나타내는 전역 “context”를 이용한다(만약 있다면; 마이그레이션은 SQL/DDL 지시문을 파일에도 덤프할 수 있다).  전역 컨텍스트는 다른 모든 것들과 마찬가지로 <code class="docutils literal notranslate"><span class="pre">env.py</span></code>스크립트에서 설정된다.</p>
<p>모든 Alembic 지시문들의 개요는 <a class="reference internal" href="ops.html#ops"><span class="std std-ref">Operation Reference</span></a>에 있다.</p>
</div>
<div class="section" id="running-our-first-migration">
<h2>첫 번째 마이그레이션 실행하기<a class="headerlink" href="#running-our-first-migration" title="제목 주소">¶</a></h2>
<p>마이그레이션을 실행하려고 한다.  데이터베이스가 완전히 깨끗하고, 아직 버전이 없는 상태라고 가정한다.  <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">upgrade</span></code> 명령어는 이번 예시에서는 <code class="docutils literal notranslate"><span class="pre">None</span></code>인 현재 데이터베이스의 리비전으로부터, 주어진 목표 리비전까지 업그레이드 작업을 실행할 것이다. <code class="docutils literal notranslate"><span class="pre">1975ea83b712</span></code>을 리비전으로 명시하여 이 버전까지 업그레이드하도록 했지만, 대부분의 경우에서는 그저 “the most recent”로 명령하는 것이 더 쉽다, 이 경우에는 <a href="#id1"><span class="problematic" id="id2">``</span></a>head``로 명령:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic upgrade head
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
INFO  [alembic.context] Running upgrade None -&gt; 1975ea83b712
</pre></div>
</div>
<p>와우!  스크린에 보이는 정보는 <code class="docutils literal notranslate"><span class="pre">alembic.ini</span></code>에서 결정된 로깅 설정의 결과이다 - <code class="docutils literal notranslate"><span class="pre">alembic</span></code> 스트림을 콘솔에 로깅한다(특히, 표준 에러).</p>
<p>마이그레이션 실행 과정으로 우선 Alembic은 <code class="docutils literal notranslate"><span class="pre">alembic_version</span></code>이라는 테이블이 있는지 체크하고, 만약 없다면, 테이블을 생성한다.  이 테이블에서 현재 버전을 찾고, 만약 있다면, 그 다음에는 요구된 버전(이 경우에는 <code class="docutils literal notranslate"><span class="pre">head</span></code>이고, <code class="docutils literal notranslate"><span class="pre">1975ea83b712</span></code>로 알고 있다) 과 현재 버전 사이의 경로를 계산한다. 그 다음에는 목표 리비전까지 가기 위하여 각각의 파일에서 <code class="docutils literal notranslate"><span class="pre">upgrade()</span></code> 메소드를 실행한다.</p>
</div>
<div class="section" id="running-our-second-migration">
<h2>두 번째 마이그레이션 실행하기<a class="headerlink" href="#running-our-second-migration" title="제목 주소">¶</a></h2>
<p>더 가지고 놀아볼 수 있도록 또 다른 것을 해보자.  리비전 파일을 다시 생성한다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic revision -m &quot;Add a column&quot;
Generating /path/to/yourapp/alembic/versions/ae1027a6acf_add_a_column.py...
done
</pre></div>
</div>
<p>이 파일을 편집하고 <code class="docutils literal notranslate"><span class="pre">account</span></code> 테이블에 새로운 컬럼을 추가한다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Add a column</span>

<span class="sd">Revision ID: ae1027a6acf</span>
<span class="sd">Revises: 1975ea83b712</span>
<span class="sd">Create Date: 2011-11-08 12:37:36.714947</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># revision identifiers, used by Alembic.</span>
<span class="n">revision</span> <span class="o">=</span> <span class="s1">&#39;ae1027a6acf&#39;</span>
<span class="n">down_revision</span> <span class="o">=</span> <span class="s1">&#39;1975ea83b712&#39;</span>

<span class="kn">from</span> <span class="nn">alembic</span> <span class="k">import</span> <span class="n">op</span>
<span class="kn">import</span> <span class="nn">sqlalchemy</span> <span class="k">as</span> <span class="nn">sa</span>

<span class="k">def</span> <span class="nf">upgrade</span><span class="p">():</span>
    <span class="n">op</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="s1">&#39;account&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;last_transaction_date&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">DateTime</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">downgrade</span><span class="p">():</span>
    <span class="n">op</span><span class="o">.</span><span class="n">drop_column</span><span class="p">(</span><span class="s1">&#39;account&#39;</span><span class="p">,</span> <span class="s1">&#39;last_transaction_date&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">head</span></code>를 다시 실행해보자:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic upgrade head
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
INFO  [alembic.context] Running upgrade 1975ea83b712 -&gt; ae1027a6acf
</pre></div>
</div>
<p>이제 데이터베이스에 <code class="docutils literal notranslate"><span class="pre">last_transaction_date</span></code> 컬럼이 추가되었다.</p>
</div>
<div class="section" id="partial-revision-identifiers">
<h2>부분 리비전 ID<a class="headerlink" href="#partial-revision-identifiers" title="제목 주소">¶</a></h2>
<p>명시적인 리비전 번호를 참조할 필요가 있는 순간이 있는데, 이를 위해 부분 번호를 사용하는 옵션이 있다.  이 번호가 버전을 고유하게 식별할 수 있으면, 어떠한 명령어든지 사용하여 버전 번호가 허용된 모든 위치에서 이 옵션을 사용할 수 있다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic upgrade ae1
</pre></div>
</div>
<p>위에서는, <code class="docutils literal notranslate"><span class="pre">a31027a6acf</span></code> 리비전을 참조하기 위해 <code class="docutils literal notranslate"><span class="pre">ae1</span></code>를 사용한다. 만약 하나 이상의 버전이 앞부분에서 동일하게 시작한다면 Alembic은 작업을 중지하고 당신에게 알려줄 것이다.</p>
</div>
<div class="section" id="relative-migration-identifiers">
<span id="relative-migrations"></span><h2>상대적 마이그레이션 ID<a class="headerlink" href="#relative-migration-identifiers" title="제목 주소">¶</a></h2>
<p>상대적인 업그레이드/다운그레이드 또한 제공된다.  현재에서 2개 버전만큼 이동하기 위해서, 십진수 값인 “+N”을 줄 수 있다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic upgrade +2
</pre></div>
</div>
<p>다운그레이드를 위해서 음수 사용이 허용된다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic downgrade -1
</pre></div>
</div>
<p>상대적 ID는 특정 리비전에 관한 것일 수 있다.  예를 들어, <code class="docutils literal notranslate"><span class="pre">ae1027a6acf</span></code> 리비전에 추가적인 두 단계만큼 더하여 업그레이드한다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic upgrade ae10+2
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">버전 0.7.0에 추가: </span>특정 리비전에 관해 상대적 마이그레이션 지원한다.</p>
</div>
</div>
<div class="section" id="getting-information">
<h2>정보 얻기<a class="headerlink" href="#getting-information" title="제목 주소">¶</a></h2>
<p>몇 개의 리비전 나타내는 것으로 일부 상태 정보를 얻을 수 있다.</p>
<p>첫 번째로 현재 리비전을 볼 수 있다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic current
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
Current revision for postgresql://scott:XXXXX@localhost/test: 1975ea83b712 -&gt; ae1027a6acf (head), Add a column
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">head</span></code>는 오직 이 데이터베이스의 리비전 ID가 헤드 리비전과 일치하는 경우에만 표시된다.</p>
<p>또한 <code class="docutils literal notranslate"><span class="pre">alembcin</span> <span class="pre">history</span></code>를 가지고 히스토리를 볼 수 있다; <code class="docutils literal notranslate"><span class="pre">—verbose</span></code> 옵션은(<code class="docutils literal notranslate"><span class="pre">history</span></code>, <code class="docutils literal notranslate"><span class="pre">current</span></code>, <code class="docutils literal notranslate"><span class="pre">heads</span></code> 그리고 <code class="docutils literal notranslate"><span class="pre">branches</span></code>들을 포함한 몇가지의 명령어에 의해 받아들여지고) 각각의 리비전에 대한 전체 정보를 보여줄 것이다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic history --verbose

Rev: ae1027a6acf (head)
Parent: 1975ea83b712
Path: /path/to/yourproject/alembic/versions/ae1027a6acf_add_a_column.py

    add a column

    Revision ID: ae1027a6acf
    Revises: 1975ea83b712
    Create Date: 2014-11-20 13:02:54.849677

Rev: 1975ea83b712
Parent: &lt;base&gt;
Path: /path/to/yourproject/alembic/versions/1975ea83b712_add_account_table.py

    create account table

    Revision ID: 1975ea83b712
    Revises:
    Create Date: 2014-11-20 13:02:46.257104
</pre></div>
</div>
<div class="section" id="viewing-history-ranges">
<h3>히스토리 범위 보기<a class="headerlink" href="#viewing-history-ranges" title="제목 주소">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">history</span></code>에서 <code class="docutils literal notranslate"><span class="pre">-r</span></code> 옵션을 사용하면, 히스토리의 여러 단편을 볼 수 있다.  <code class="docutils literal notranslate"><span class="pre">-r</span></code> 인자는 <code class="docutils literal notranslate"><span class="pre">[start]:[end]</span></code> 인자를 받아들이는데, 여기에는 리비전 번호가 들어갈 수 있고, <code class="docutils literal notranslate"><span class="pre">head</span></code>, <code class="docutils literal notranslate"><span class="pre">heads</span></code> 또는 <code class="docutils literal notranslate"><span class="pre">base</span></code>, 현재 리비전을 명시하는 <code class="docutils literal notranslate"><span class="pre">current</span></code> 기호를 사용할 수 있고, 또한 상대적 음수 범위로 <code class="docutils literal notranslate"><span class="pre">[start]</span></code> 그리고 상대적 양수 범위로 <code class="docutils literal notranslate"><span class="pre">[end]</span></code>를 사용할 수도 있다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic history -r1975ea:ae1027
</pre></div>
</div>
<p>현재 마이그레이션보다 3개 이전의 리비전부터 시작하는 상대적 범위로, 현재의 마이그레이션을 가져오기 위해 데이터베이스에 마이그레이션 환경을 실행시킨다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic history -r-3:current
</pre></div>
</div>
<p>1975부터 헤드까지 모든 리비전을 보여주기:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic history -r1975ea:
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">버전 0.6.0에 추가: </span><code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">revision</span></code>은 버전 번호, 기호, 또는 상대적 델타에 기반한 특정한 범위를 명시하기 위해 <code class="docutils literal notranslate"><span class="pre">-r</span></code> 인자를 받는다.</p>
</div>
</div>
</div>
<div class="section" id="downgrading">
<h2>다운그레이딩<a class="headerlink" href="#downgrading" title="제목 주소">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">downgrade</span></code>를 호출하여, Alembic에서 <code class="docutils literal notranslate"><span class="pre">base</span></code>라고 부르는 처음으로 돌아가, 아무것도 없는 상태로 다운그레이드 하는 것을 보여줄 수 있다:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic downgrade base
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
INFO  [alembic.context] Running downgrade ae1027a6acf -&gt; 1975ea83b712
INFO  [alembic.context] Running downgrade 1975ea83b712 -&gt; None
</pre></div>
</div>
<p>아무것도 없는 상태로 돌아가고 - 다시 업그레이드하기:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ alembic upgrade head
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
INFO  [alembic.context] Running upgrade None -&gt; 1975ea83b712
INFO  [alembic.context] Running upgrade 1975ea83b712 -&gt; ae1027a6acf
</pre></div>
</div>
</div>
<div class="section" id="next-steps">
<h2>다음 단계<a class="headerlink" href="#next-steps" title="제목 주소">¶</a></h2>
<p>대다수의 Alembic 환경은 “autogenerate” 기능을 가장 많이 사용한다.  다음 장인 <a class="reference internal" href="autogenerate.html"><span class="doc">마이그레이션 자동 생성</span></a>으로 넘어가서 계속하라.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">튜토리얼</a><ul>
<li><a class="reference internal" href="#the-migration-environment">마이그레이션 환경</a></li>
<li><a class="reference internal" href="#creating-an-environment">환경 생성하기</a></li>
<li><a class="reference internal" href="#editing-the-ini-file">.init 파일 편집하기</a></li>
<li><a class="reference internal" href="#create-a-migration-script">마이그레이션 스크립트 생성하기</a></li>
<li><a class="reference internal" href="#running-our-first-migration">첫 번째 마이그레이션 실행하기</a></li>
<li><a class="reference internal" href="#running-our-second-migration">두 번째 마이그레이션 실행하기</a></li>
<li><a class="reference internal" href="#partial-revision-identifiers">부분 리비전 ID</a></li>
<li><a class="reference internal" href="#relative-migration-identifiers">상대적 마이그레이션 ID</a></li>
<li><a class="reference internal" href="#getting-information">정보 얻기</a><ul>
<li><a class="reference internal" href="#viewing-history-ranges">히스토리 범위 보기</a></li>
</ul>
</li>
<li><a class="reference internal" href="#downgrading">다운그레이딩</a></li>
<li><a class="reference internal" href="#next-steps">다음 단계</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>빠른 검색</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="바로 가기" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h4>이전 항목</h4>
  <p class="topless"><a href="front.html"
                        title="이전 장">서문</a></p>
  <h4>다음 항목</h4>
  <p class="topless"><a href="autogenerate.html"
                        title="다음 장">마이그레이션 자동 생성</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>탐색</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="전체 색인"
             >색인</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python 모듈 목록"
             >모듈</a> |</li>
        <li class="right" >
          <a href="autogenerate.html" title="마이그레이션 자동 생성"
             >다음</a> |</li>
        <li class="right" >
          <a href="front.html" title="서문"
             >이전</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Alembic 1.0.8 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2019, Mike Bayer.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>